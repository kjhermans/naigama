#!/usr/bin/perl

use Data::Dumper;

$Data::Dumper::Sortkeys = 1;

my $file = shift @ARGV;
my $perl = `cat $file`;
my $arry = eval $perl;

print "/** Autogenerated from $file **/

#ifndef _NAIG_BUILTIN_H_
#define _NAIG_BUILTIN_H_

";

for (my $i=0; $i < scalar(@{$arry}); $i++) {
  print "#define NAIG_BUILTIN_" . uc($arry->[$i]) . " " . ($i+1) . "\n";
}
print "\n";

for (my $i=0; $i < scalar(@{$arry}); $i++) {
  print "#define NAIG_BUILTIN_" . uc($arry->[$i]) . "_STRING \"" . $arry->[$i] . "\"\n";
}
print "\n";

print "#define NAIG_BUILTIN_STRINGS " . scalar(@{$arry}) . "\n";
print "#define NAIG_BUILTIN_STRING { \\\n";
for (my $i=0; $i < scalar(@{$arry}); $i++) {
  print "  \"" . $arry->[$i] . "\"";
  if ($i < scalar(@{$arry})-1) {
    print ",";
  }
  print " \\\n";
}
print "}\n";

print "\n#endif\n";

1;
